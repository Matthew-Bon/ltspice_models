Version 4
SHEET 1 1640 960
WIRE 256 -48 16 -48
WIRE 800 -48 528 -48
WIRE 1200 -48 1088 -48
WIRE 1296 -48 1200 -48
WIRE 1424 -48 1296 -48
WIRE 800 -16 800 -48
WIRE 528 16 528 -48
WIRE 1088 16 1088 -48
WIRE 1296 16 1296 -48
WIRE 256 32 256 -48
WIRE 1200 32 1200 -48
WIRE 16 80 16 -48
WIRE 800 112 800 64
WIRE 528 144 528 96
WIRE 1088 144 1088 96
WIRE 1200 144 1200 96
WIRE 1200 144 1088 144
WIRE 1296 144 1296 96
WIRE 1296 144 1200 144
WIRE 256 160 256 112
WIRE 1200 192 1200 144
WIRE 16 208 16 160
WIRE 256 272 256 240
WIRE 384 272 256 272
WIRE 800 288 800 192
WIRE 256 304 256 272
WIRE 256 448 256 384
WIRE 1056 448 784 448
WIRE 1056 496 1056 448
WIRE 784 528 784 448
WIRE 784 640 784 608
WIRE 1056 640 1056 576
WIRE 1056 720 784 720
WIRE 1056 784 1056 720
WIRE 784 800 784 720
WIRE 784 912 784 880
WIRE 1056 912 1056 864
FLAG 16 208 0
FLAG 256 448 0
FLAG 528 144 0
FLAG 800 288 0
FLAG 1200 192 0
FLAG 784 640 0
FLAG 784 912 0
FLAG 1424 -48 Angular_position
FLAG 1056 640 0
FLAG 1056 912 0
FLAG 16 -48 V_motor
FLAG 528 -48 H_torq
FLAG 1056 448 Angular_Velocity
FLAG 1056 720 Motor_current
FLAG 384 272 Back_emf
SYMBOL voltage 16 64 R0
WINDOW 3 -656 19 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PWL(0 0 1 10 2 10 3 10 4 9 5 8 6 7 7 5 8 4 9 2 10 0)
SYMATTR InstName V_amp
SYMBOL ind 240 16 R0
SYMATTR InstName Lm
SYMATTR Value {L_motor}
SYMBOL res 240 144 R0
SYMATTR InstName Rm
SYMATTR Value {R_motor}
SYMBOL ind 784 -32 R0
SYMATTR InstName Lj
SYMATTR Value {Inertia}
SYMBOL res 784 96 R0
SYMATTR InstName Rb
SYMATTR Value {Friction}
SYMBOL cap 1184 32 R0
SYMATTR InstName CPOS
SYMATTR Value 1
SYMBOL res 1280 0 R0
SYMATTR InstName RPOS
SYMATTR Value 1
SYMBOL bi2 784 528 R0
SYMATTR InstName Angular_Velocity
SYMATTR Value I = I{Rb}
SYMBOL bi2 784 800 R0
SYMATTR InstName Motor_current
SYMATTR Value I = I{Rm}
SYMBOL bv 256 288 R0
SYMATTR InstName V_back
SYMATTR Value V = I(H_Torq)*{K_emf}
SYMBOL bv 528 0 R0
SYMATTR InstName H_Torq
SYMATTR Value V = -I(V_back) * {Kt}
SYMBOL bi2 1088 16 R0
WINDOW 0 -84 0 Left 2
WINDOW 3 -163 91 Left 2
SYMATTR InstName Fpos
SYMATTR Value I=I{H_Torq}
SYMBOL res 1040 480 R0
SYMATTR InstName R1
SYMATTR Value 1
SYMBOL res 1040 768 R0
SYMATTR InstName R2
SYMATTR Value 1
TEXT -344 240 Left 2 !.param R_motor = 0.5
TEXT -344 280 Left 2 !.param L_motor = 1.5m
TEXT -344 312 Left 2 !.param Inertia = 0.00025
TEXT -344 344 Left 2 !.param Friction = 0.0001
TEXT -344 376 Left 2 !.param V_motor = 10
TEXT -344 456 Left 2 !.tran 0 10 0.01 0.001
TEXT 280 416 Left 2 ;Torq *K_emf
TEXT 568 136 Left 2 ;Back emf * Kt
TEXT -344 408 Left 2 !.param K_emf =0.05
TEXT -344 432 Left 2 !.param Kt = 0.05
